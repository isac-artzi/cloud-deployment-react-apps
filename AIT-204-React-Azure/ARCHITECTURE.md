# Architecture Guide

## ğŸ›ï¸ System Architecture

### High-Level Overview

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         User's Browser                           â”‚
â”‚                                                                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚           React Application (TypeScript)                 â”‚   â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”              â”‚   â”‚
â”‚  â”‚  â”‚TodoForm  â”‚  â”‚TodoList  â”‚  â”‚TodoItem  â”‚              â”‚   â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜              â”‚   â”‚
â”‚  â”‚       â”‚             â”‚             â”‚                      â”‚   â”‚
â”‚  â”‚       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                      â”‚   â”‚
â”‚  â”‚                     â”‚                                     â”‚   â”‚
â”‚  â”‚              â”Œâ”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”                             â”‚   â”‚
â”‚  â”‚              â”‚  API Service â”‚                             â”‚   â”‚
â”‚  â”‚              â”‚   (Axios)    â”‚                             â”‚   â”‚
â”‚  â”‚              â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜                             â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â”‚ HTTPS (REST API)
                         â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              Azure Static Web Apps                             â”‚
â”‚  â€¢ Serves React build (HTML, CSS, JS)                         â”‚
â”‚  â€¢ CDN for fast global delivery                               â”‚
â”‚  â€¢ HTTPS certificate (automatic)                              â”‚
â”‚  â€¢ Free tier: 100 GB bandwidth/month                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â”‚
                         â”‚ HTTPS API Calls
                         â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              Azure Container Apps                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚                FastAPI Backend (Docker)                  â”‚  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”              â”‚  â”‚
â”‚  â”‚  â”‚ main.py  â”‚â†’ â”‚routes.py â”‚â†’ â”‚models.py â”‚              â”‚  â”‚
â”‚  â”‚  â”‚  (CORS)  â”‚  â”‚ (API)    â”‚  â”‚(Pydantic)â”‚              â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜              â”‚  â”‚
â”‚  â”‚                     â”‚                                     â”‚  â”‚
â”‚  â”‚              â”Œâ”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”                             â”‚  â”‚
â”‚  â”‚              â”‚  In-Memory  â”‚                             â”‚  â”‚
â”‚  â”‚              â”‚   Storage   â”‚                             â”‚  â”‚
â”‚  â”‚              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                             â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚  â€¢ Auto-scaling (0-1 replicas)                                â”‚
â”‚  â€¢ Free tier: 180,000 vCPU-seconds/month                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â”‚
                         â”‚ Pulls Image
                         â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚           Azure Container Registry (ACR)                       â”‚
â”‚  â€¢ Stores Docker images                                        â”‚
â”‚  â€¢ Private registry                                            â”‚
â”‚  â€¢ ~$5/month                                                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ“Š Data Flow

### Creating a Todo

```
User Browser                 Frontend              Backend              Database
    â”‚                           â”‚                     â”‚                    â”‚
    â”‚  1. Click "Add Todo"      â”‚                     â”‚                    â”‚
    â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚                     â”‚                    â”‚
    â”‚                           â”‚                     â”‚                    â”‚
    â”‚                           â”‚  2. POST /api/todos â”‚                    â”‚
    â”‚                           â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚                    â”‚
    â”‚                           â”‚     {title, desc}   â”‚                    â”‚
    â”‚                           â”‚                     â”‚  3. Validate       â”‚
    â”‚                           â”‚                     â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”‚
    â”‚                           â”‚                     â”‚         â”‚          â”‚
    â”‚                           â”‚                     â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â”‚
    â”‚                           â”‚                     â”‚                    â”‚
    â”‚                           â”‚                     â”‚  4. Create Todo    â”‚
    â”‚                           â”‚                     â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚
    â”‚                           â”‚                     â”‚                    â”‚
    â”‚                           â”‚                     â”‚  5. Return Todo    â”‚
    â”‚                           â”‚                     â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
    â”‚                           â”‚  6. Response: Todo  â”‚                    â”‚
    â”‚                           â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤                    â”‚
    â”‚  7. Update UI             â”‚                     â”‚                    â”‚
    â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤                     â”‚                    â”‚
    â”‚  (Show new todo)          â”‚                     â”‚                    â”‚
```

## ğŸ”„ Request/Response Cycle

### Example: GET /api/todos

```
1. Browser
   â””â”€> GET https://your-app.azurestaticapps.net/
   â””â”€> Loads React app

2. React App (useEffect on mount)
   â””â”€> api.getTodos()
   â””â”€> axios.get('https://backend.azurecontainerapps.io/api/todos')

3. Azure Container Apps
   â””â”€> FastAPI receives request
   â””â”€> Routes to get_todos() function
   â””â”€> Returns todos_db list

4. Backend Response
   â””â”€> [
         {
           "id": 1,
           "title": "Buy groceries",
           "description": "Milk, eggs",
           "completed": false,
           "created_at": "2024-01-01T10:00:00",
           "updated_at": "2024-01-01T10:00:00"
         }
       ]

5. Frontend receives response
   â””â”€> setTodos(data)
   â””â”€> TodoList component renders
   â””â”€> User sees todos
```

## ğŸ—‚ï¸ Component Hierarchy

```
App (State: todos, loading, error)
â”‚
â”œâ”€â”€ Header
â”‚   â””â”€â”€ Title + Subtitle
â”‚
â”œâ”€â”€ TodoForm
â”‚   â”œâ”€â”€ Title Input
â”‚   â”œâ”€â”€ Description Textarea
â”‚   â””â”€â”€ Submit Button
â”‚   â”‚
â”‚   â””â”€â”€ onSubmit() â†’ calls App.handleCreateTodo()
â”‚
â””â”€â”€ TodoList (Props: todos, onToggle, onDelete)
    â”‚
    â”œâ”€â”€ Filter Buttons (All/Active/Completed)
    â”‚
    â””â”€â”€ TodoItem (for each todo)
        â”œâ”€â”€ Checkbox â†’ onToggle()
        â”œâ”€â”€ Title + Description
        â””â”€â”€ Delete Button â†’ onDelete()
```

## ğŸ” Security Architecture

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        Security Layers                        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                               â”‚
â”‚  1. Transport Security (HTTPS)                               â”‚
â”‚     â€¢ Azure provides SSL/TLS certificates                    â”‚
â”‚     â€¢ All traffic encrypted                                  â”‚
â”‚                                                               â”‚
â”‚  2. CORS Protection                                          â”‚
â”‚     â€¢ Backend only accepts requests from known origins       â”‚
â”‚     â€¢ Prevents unauthorized cross-origin requests            â”‚
â”‚                                                               â”‚
â”‚  3. Input Validation                                         â”‚
â”‚     â€¢ Pydantic models validate all incoming data             â”‚
â”‚     â€¢ Type checking and field constraints                    â”‚
â”‚                                                               â”‚
â”‚  4. Container Security                                       â”‚
â”‚     â€¢ Docker runs as non-root user                           â”‚
â”‚     â€¢ Minimal base image (python:3.11-slim)                  â”‚
â”‚                                                               â”‚
â”‚  5. Environment Variables                                    â”‚
â”‚     â€¢ Secrets not in code                                    â”‚
â”‚     â€¢ .env files in .gitignore                               â”‚
â”‚                                                               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ”§ Build & Deployment Pipeline

```
Developer Machine                    GitHub                    Azure
      â”‚                                â”‚                         â”‚
      â”‚  1. Write Code                 â”‚                         â”‚
      â”‚     (git commit)               â”‚                         â”‚
      â”‚                                â”‚                         â”‚
      â”‚  2. Push to GitHub             â”‚                         â”‚
      â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚                         â”‚
      â”‚     (git push)                 â”‚                         â”‚
      â”‚                                â”‚                         â”‚
      â”‚                                â”‚  3. GitHub Actions      â”‚
      â”‚                                â”‚     Triggered           â”‚
      â”‚                                â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”               â”‚
      â”‚                                â”‚         â”‚               â”‚
      â”‚                                â”‚         â–¼               â”‚
      â”‚                                â”‚  4. Build Frontend      â”‚
      â”‚                                â”‚     npm install         â”‚
      â”‚                                â”‚     npm run build       â”‚
      â”‚                                â”‚                         â”‚
      â”‚                                â”‚  5. Deploy to Azure     â”‚
      â”‚                                â”‚     Static Web Apps     â”‚
      â”‚                                â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚
      â”‚                                â”‚                         â”‚
      â”‚                                â”‚                    Deploy!
      â”‚                                â”‚                         â”‚
      â”‚                                â”‚                         â”‚
      â”‚  For Backend:                  â”‚                         â”‚
      â”‚                                â”‚                         â”‚
      â”‚  6. Build Docker Image         â”‚                         â”‚
      â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”‚                         â”‚
      â”‚                      â”‚         â”‚                         â”‚
      â”‚                      â–¼         â”‚                         â”‚
      â”‚  docker build -t api .         â”‚                         â”‚
      â”‚                                â”‚                         â”‚
      â”‚  7. Push to ACR                â”‚                         â”‚
      â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚
      â”‚  docker push acr.io/api        â”‚                         â”‚
      â”‚                                â”‚                         â”‚
      â”‚  8. Update Container App       â”‚                         â”‚
      â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚
      â”‚  az containerapp update        â”‚                         â”‚
      â”‚                                â”‚                         â”‚
```

## ğŸ’¾ Data Storage Evolution

### Current (In-Memory)
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Container Apps     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚   todos_db    â”‚  â”‚  â† List[Todo]
â”‚  â”‚   (Python     â”‚  â”‚  â† Resets on restart
â”‚  â”‚    list)      â”‚  â”‚  â† Not persistent
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Future (Database)
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Container Apps     â”‚         â”‚  Azure PostgreSQL    â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚         â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  SQLAlchemy   â”‚â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€>â”‚  â”‚  todos table   â”‚  â”‚
â”‚  â”‚  (ORM)        â”‚  â”‚  SQL    â”‚  â”‚  - id          â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚         â”‚  â”‚  - title       â”‚  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â”‚  â”‚  - completed   â”‚  â”‚
                                â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
                                â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                     â†‘ Persistent!
```

## ğŸŒ Network Flow

```
Internet                    Azure Front Door (CDN)              Azure Backend
   â”‚                                 â”‚                                â”‚
   â”‚  User requests page             â”‚                                â”‚
   â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚                                â”‚
   â”‚                                 â”‚                                â”‚
   â”‚  HTML/CSS/JS returned           â”‚                                â”‚
   â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤                                â”‚
   â”‚  (Cached at edge)               â”‚                                â”‚
   â”‚                                 â”‚                                â”‚
   â”‚  User creates todo              â”‚                                â”‚
   â”‚  POST /api/todos                â”‚                                â”‚
   â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚
   â”‚                                 â”‚                        FastAPI â”‚
   â”‚                                 â”‚                       processes â”‚
   â”‚  Todo created (JSON)            â”‚                                â”‚
   â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
   â”‚                                 â”‚                                â”‚
```

## ğŸ“¦ Docker Container Internals

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    Docker Container                           â”‚
â”‚                                                               â”‚
â”‚  OS: Debian Slim                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  Python 3.11                                          â”‚   â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚   â”‚
â”‚  â”‚  â”‚  Uvicorn (ASGI Server)                        â”‚    â”‚   â”‚
â”‚  â”‚  â”‚  Port: 8000                                   â”‚    â”‚   â”‚
â”‚  â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚    â”‚   â”‚
â”‚  â”‚  â”‚  â”‚  FastAPI Application                 â”‚    â”‚    â”‚   â”‚
â”‚  â”‚  â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚    â”‚    â”‚   â”‚
â”‚  â”‚  â”‚  â”‚  â”‚  /app/app/                   â”‚    â”‚    â”‚    â”‚   â”‚
â”‚  â”‚  â”‚  â”‚  â”‚  â”œâ”€â”€ main.py                 â”‚    â”‚    â”‚    â”‚   â”‚
â”‚  â”‚  â”‚  â”‚  â”‚  â”œâ”€â”€ routes.py               â”‚    â”‚    â”‚    â”‚   â”‚
â”‚  â”‚  â”‚  â”‚  â”‚  â””â”€â”€ models.py               â”‚    â”‚    â”‚    â”‚   â”‚
â”‚  â”‚  â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚    â”‚    â”‚   â”‚
â”‚  â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚    â”‚   â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                               â”‚
â”‚  User: appuser (non-root)                                    â”‚
â”‚  Healthcheck: GET / every 30s                                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ”„ State Management Flow

```
App Component
    â”‚
    â”œâ”€â”€ useState: todos (Todo[])
    â”‚   â”‚
    â”‚   â”œâ”€â”€ Modified by: handleCreateTodo()
    â”‚   â”œâ”€â”€ Modified by: handleToggleTodo()
    â”‚   â””â”€â”€ Modified by: handleDeleteTodo()
    â”‚
    â”œâ”€â”€ useState: loading (boolean)
    â”‚   â”‚
    â”‚   â””â”€â”€ Set during: loadTodos()
    â”‚
    â””â”€â”€ useState: error (string | null)
        â”‚
        â””â”€â”€ Set on: API errors

Props Flow:
    App â†’ TodoForm â†’ onSubmit={handleCreateTodo}
    App â†’ TodoList â†’ todos={todos}
              â””â”€â”€ TodoItem â†’ onToggle={handleToggleTodo}
                           â†’ onDelete={handleDeleteTodo}
```

## ğŸ¯ API Endpoint Architecture

```
FastAPI Router
â”‚
â”œâ”€â”€ GET /
â”‚   â””â”€â”€ health_check()
â”‚       â””â”€â”€ Returns: {"status": "healthy"}
â”‚
â”œâ”€â”€ GET /api/todos
â”‚   â””â”€â”€ get_todos()
â”‚       â””â”€â”€ Returns: List[Todo]
â”‚
â”œâ”€â”€ POST /api/todos
â”‚   â””â”€â”€ create_todo(todo: TodoCreate)
â”‚       â”œâ”€â”€ Validates input (Pydantic)
â”‚       â”œâ”€â”€ Generates ID
â”‚       â”œâ”€â”€ Adds to todos_db
â”‚       â””â”€â”€ Returns: Todo (201 Created)
â”‚
â”œâ”€â”€ GET /api/todos/{id}
â”‚   â””â”€â”€ get_todo(id: int)
â”‚       â”œâ”€â”€ Searches todos_db
â”‚       â””â”€â”€ Returns: Todo or 404
â”‚
â”œâ”€â”€ PUT /api/todos/{id}
â”‚   â””â”€â”€ update_todo(id: int, updates: TodoUpdate)
â”‚       â”œâ”€â”€ Finds todo
â”‚       â”œâ”€â”€ Updates fields
â”‚       â””â”€â”€ Returns: Todo or 404
â”‚
â””â”€â”€ DELETE /api/todos/{id}
    â””â”€â”€ delete_todo(id: int)
        â”œâ”€â”€ Finds and removes todo
        â””â”€â”€ Returns: 204 No Content or 404
```

## ğŸ“ˆ Scaling Architecture

### Current Setup (Free Tier)
```
Requests â†’ Static Web Apps â†’ Container Apps (1 instance max)
                                    â†“
                              In-Memory Storage
```

### Scaled Setup (Production)
```
                        â”Œâ”€â†’ Container Apps (Instance 1) â”€â”
Requests â†’ Static Web   â”‚                                â”œâ”€â†’ PostgreSQL
           Apps + CDN   â”œâ”€â†’ Container Apps (Instance 2) â”€â”¤   (Primary)
                        â”‚                                â”‚      â†“
                        â””â”€â†’ Container Apps (Instance N) â”€â”˜   Replica
                                                              (Read)
                        + Redis Cache (optional)
```

## ğŸ” Monitoring Architecture

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              Application Insights (Optional)            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                â”‚ Collects telemetry
                â”‚
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚                       â”‚                      â”‚
    â–¼                       â–¼                      â–¼
Frontend Logs          Backend Logs          Performance
- Page views          - API requests         - Load times
- Errors              - Errors               - API latency
- User actions        - Exceptions           - Resource usage
```

---

## ğŸ’¡ Key Architectural Decisions

### Why FastAPI?
- âœ… Automatic API documentation (Swagger/ReDoc)
- âœ… Built-in data validation (Pydantic)
- âœ… High performance (async support)
- âœ… Python 3.9+ type hints
- âœ… Easy to learn

### Why React?
- âœ… Component-based architecture
- âœ… Large ecosystem
- âœ… Good TypeScript support
- âœ… Virtual DOM for performance
- âœ… Industry standard

### Why Azure Static Web Apps?
- âœ… Free tier with generous limits
- âœ… Automatic HTTPS
- âœ… Global CDN
- âœ… GitHub integration
- âœ… Easy deployment

### Why Container Apps?
- âœ… Scales to zero (free tier friendly)
- âœ… Managed service (no server management)
- âœ… Auto-scaling
- âœ… Pay per use
- âœ… Built-in load balancing

### Why In-Memory Storage?
- âœ… Simple for learning
- âœ… No database costs
- âœ… Fast performance
- âŒ Not persistent (easy to upgrade later)

---

*This architecture is designed for learning and can scale to production with minimal changes.*
